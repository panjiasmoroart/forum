<div class="row">
  <div class="col-md-8 col-lg-8 mx-auto">
    <div class="thread">
      <h4 class="forum-title"><%= @thread.title.titleize %></h4>
      <div class="meta">
        <i class="far fa-calendar-plus"></i>
        <%= I18n.l(@thread.created_at.to_date) %> oleh <i class="far fa-user"></i> <%= @thread.user.name  %>
      </div>

      <div class="content">
        <p>
          <%= @thread.content %>
        </p>
      </div>
    </div>

    <% if user_signed_in? && policy(@thread).edit? %>
      <div class="action edit">
        <%= link_to 'Edit', edit_forum_thread_path(@thread), class: 'btn btn-info mb-3' %>
        <% if policy(@thread).destroy? %>       
          <%= link_to 'Delete', forum_thread_path(@thread), method: :delete, data: {confirm: 'Yakin ingin menghapus thread'}, class: 'btn btn-danger mb-3' %>
        <% end %>       
      </div>
    <% end %>

    <% if @thread.forum_posts.any? %>
      <% @thread.forum_posts.each do |p| %>
        <div class="thread">
          <div class="meta">
            <i class="far fa-calendar-plus"></i>
            <%= I18n.l(p.created_at.to_date) %> oleh <i class="far fa-user"></i> <%= p.user.name  %>
          </div>

          <div class="content">
            <p>
              <%= p.content %>
            </p>
          </div>
        </div>
      <% end %>
    <% else %>
      <div>
        Jadilah yang pertama melakukan tanggapan
      </div>
    <% end %>

    <% if @post.errors.any? %> 
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <% @post.errors.full_messages.each do |error| %>
        <strong>Field </strong> <%= error %>.
        <% end %>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    <% end %>  

    <% if user_signed_in? %>
      <%= form_for [@thread, @post] do |f| %>
        <div class="form-group">
          <%= f.label :content %>
          <%= f.text_area :content, rows: 10, class: 'form-control' %>
        </div>

        <div class="form-group">
          <%= f.submit "Buat", class: 'btn btn-primary form-control'  %>
        </div>
      <% end %>
    <% end %> 
  </div> 
</div>